(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{336:function(s,t,a){"use strict";a.r(t);var e=a(3),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"在-win10-中启动-wsl2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-win10-中启动-wsl2"}},[s._v("#")]),s._v(" 在 Win10 中启动 WSL2")]),s._v(" "),t("p",[s._v("本文内容：")]),s._v(" "),t("ol",[t("li",[s._v("了解  WSL 和 WSL2")]),s._v(" "),t("li",[s._v("在 Windows 10 上开启 WSL2 并安装 Ubuntu")]),s._v(" "),t("li",[s._v("安装工具 Windows Terminal")])]),s._v(" "),t("p",[s._v("参考官网文档： https://docs.microsoft.com/zh-cn/windows/wsl/")]),s._v(" "),t("h2",{attrs:{id:"什么是-wsl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-wsl"}},[s._v("#")]),s._v(" 什么是 WSL")]),s._v(" "),t("p",[t("code",[s._v("WSL")]),s._v("，即 "),t("code",[s._v("Windows Subsystem for Linux")]),s._v("，适用于 Linux 的 Windows 子系统可让开发人员按原样运行 GNU/Linux 环境 (包括大多数命令行工具、实用工具和应用程序)， 且不会产生虚拟机开销。")]),s._v(" "),t("p",[s._v("您可以：")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://aka.ms/wslstore",target:"_blank",rel:"noopener noreferrer"}},[s._v("在 Microsoft Store"),t("OutboundLink")],1),s._v(" 中选择你偏好的 GNU/Linux 分发版。")]),s._v(" "),t("li",[s._v("运行常用的命令行软件工具（例如 "),t("code",[s._v("grep")]),s._v("、"),t("code",[s._v("sed")]),s._v("、"),t("code",[s._v("awk")]),s._v("）或其他 ELF-64 二进制文件。")]),s._v(" "),t("li",[s._v("运行 Bash shell 脚本和 GNU/Linux 命令行应用程序，包括：\n"),t("ul",[t("li",[s._v("工具：vim、emacs、tmux")]),s._v(" "),t("li",[s._v("语言："),t("a",{attrs:{href:"https://docs.microsoft.com/zh-CN/windows/nodejs/setup-on-wsl2",target:"_blank",rel:"noopener noreferrer"}},[s._v("NodeJS"),t("OutboundLink")],1),s._v("、Javascript、"),t("a",{attrs:{href:"https://docs.microsoft.com/zh-CN/windows/python/web-frameworks",target:"_blank",rel:"noopener noreferrer"}},[s._v("Python"),t("OutboundLink")],1),s._v("、Ruby、C/C++、C# 与 F#、Rust、Go 等")]),s._v(" "),t("li",[s._v("服务：SSHD、"),t("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-database",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL"),t("OutboundLink")],1),s._v("、Apache、lighttpd、"),t("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-database",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB"),t("OutboundLink")],1),s._v("、"),t("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-database",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostgreSQL"),t("OutboundLink")],1),s._v("。")])])]),s._v(" "),t("li",[s._v("使用自己的 GNU/Linux 分发包管理器安装其他软件。")]),s._v(" "),t("li",[s._v("使用类似于 Unix 的命令行 shell 调用 Windows 应用程序。")]),s._v(" "),t("li",[s._v("在 Windows 上调用 GNU/Linux 应用程序。")])]),s._v(" "),t("h2",{attrs:{id:"什么是wsl2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是wsl2"}},[s._v("#")]),s._v(" 什么是WSL2")]),s._v(" "),t("p",[s._v("WSL 2 是适用于 Linux 的 Windows 子系统体系结构的一个新版本，它支持适用于 Linux 的 Windows 子系统在 Windows 上运行 ELF64 Linux 二进制文件。 它的主要目标是"),t("strong",[s._v("提高文件系统性能")]),s._v("，以及添加"),t("strong",[s._v("完全的系统调用兼容性")]),s._v("。")]),s._v(" "),t("p",[s._v("这一新的体系结构改变了这些 Linux 二进制文件与Windows 和计算机硬件进行交互的方式，但仍然提供与 WSL 1（当前广泛可用的版本）中相同的用户体验。")]),s._v(" "),t("p",[s._v("单个 Linux 分发版可以在 WSL 1 或 WSL 2 体系结构中运行。 每个分发版可随时升级或降级，并且你可以并行运行 WSL 1 和 WSL 2 分发版。 WSL 2 使用全新的体系结构，该体系结构受益于运行真正的 Linux 内核。")]),s._v(" "),t("p",[s._v("总结如下：")]),s._v(" "),t("ol",[t("li",[s._v("WSL 2 是 WSL 中体系结构的新版本，它更改 Linux 发行版与 Windows 交互的方式。")]),s._v(" "),t("li",[s._v("WSL 2 的主要目标是提高文件系统性能并增加系统调用的完全兼容性。")]),s._v(" "),t("li",[s._v("每个 Linux 发行版都可以作为 WSL 1 或 WSL 2 发行版运行，并可随时进行切换。")]),s._v(" "),t("li",[s._v("WSL 2 是底层体系结构的主要功能，它使用虚拟化技术和 Linux 内核来实现其新功能。")])]),s._v(" "),t("h2",{attrs:{id:"wsl-1-和-wsl-2-功能比较"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-1-和-wsl-2-功能比较"}},[s._v("#")]),s._v(" WSL 1 和 WSL 2 功能比较")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20220414221049850.png",alt:"image-20220414221049850"}})]),s._v(" "),t("h2",{attrs:{id:"安装-wsl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-wsl"}},[s._v("#")]),s._v(" 安装 WSL")]),s._v(" "),t("p",[s._v("详细安装过程可参考文档 https://docs.microsoft.com/zh-cn/windows/wsl/install")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("一步安装指令")]),s._v("： "),t("code",[s._v("wsl --install")])]),s._v(" "),t("p",[s._v("在管理员 PowerShell 或 Windows 命令提示符中输入此命令，然后重启计算机")])]),s._v(" "),t("p",[s._v("此命令将：")]),s._v(" "),t("ul",[t("li",[s._v("启用可选的 WSL 和虚拟机平台组件")]),s._v(" "),t("li",[s._v("下载并安装最新 Linux 内核")]),s._v(" "),t("li",[s._v("将 WSL 2 设置为默认值")]),s._v(" "),t("li",[s._v("下载并安装 Ubuntu Linux 发行版（可能需要重新启动）")])]),s._v(" "),t("p",[t("strong",[s._v("旧版的 Windows 可能不支持这种方式，所以需要进行手动分步安装，如下所述。")])]),s._v(" "),t("h3",{attrs:{id:"步骤-1-启用适用于-linux-的-windows-子系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-1-启用适用于-linux-的-windows-子系统"}},[s._v("#")]),s._v(" 步骤 1 - 启用适用于 Linux 的 Windows 子系统")]),s._v(" "),t("p",[s._v("以 "),t("strong",[s._v("管理员身份")]),s._v(" 打开 "),t("code",[s._v("PowerShell")])]),s._v(" "),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20220414230052575.png",alt:"image-20220414230052575"}})]),s._v(" "),t("p",[s._v("输入如下命令 (然后根据提示重启电脑)：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("dism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:Microsoft-Windows-Subsystem-Linux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20210330232921672.png",alt:"image-20210330232921672"}})]),s._v(" "),t("p",[s._v("或者也可以：")]),s._v(" "),t("p",[s._v("设置 → 应用和功能 → 右侧相关设置中的程序和功能 → 左侧启用或关闭"),t("code",[s._v("windows")]),s._v("功能：")]),s._v(" "),t("p",[s._v("勾选启动的"),t("code",[s._v("Linux")]),s._v("的"),t("code",[s._v("windows")]),s._v("子系统这个选项，确定后重启电脑。")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20220414230645657.png",alt:"image-20220414230645657"}})]),s._v(" "),t("h3",{attrs:{id:"步骤-2-检查运行-wsl-2-的要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-2-检查运行-wsl-2-的要求"}},[s._v("#")]),s._v(" 步骤 2 - 检查运行 WSL 2 的要求")]),s._v(" "),t("p",[s._v("更新到 WSL 2，需要运行 Windows 10。")]),s._v(" "),t("ul",[t("li",[s._v("对于 x64 系统："),t("strong",[s._v("版本 1903")]),s._v(" 或更高版本，采用 "),t("strong",[s._v("内部版本 18362")]),s._v(" 或更高版本。")])]),s._v(" "),t("blockquote",[t("p",[s._v("要检查 Windows 版本及内部版本号，选择 Windows 徽标键 + R，然后键入“winver”，选择“确定”")])]),s._v(" "),t("h3",{attrs:{id:"步骤-3-启用虚拟机功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-3-启用虚拟机功能"}},[s._v("#")]),s._v(" 步骤 3 - 启用虚拟机功能")]),s._v(" "),t("p",[s._v("安装 WSL 2 之前，必须启用“虚拟机平台”可选功能。 计算机需要"),t("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/windows/wsl/troubleshooting#error-0x80370102-the-virtual-machine-could-not-be-started-because-a-required-feature-is-not-installed",target:"_blank",rel:"noopener noreferrer"}},[s._v("虚拟化功能"),t("OutboundLink")],1),s._v("才能使用此功能。")]),s._v(" "),t("p",[s._v("以管理员身份打开 PowerShell 并运行：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("dism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:VirtualMachinePlatform "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("重新启动")]),s._v(" 计算机，以完成 WSL 安装并更新到 WSL 2。")]),s._v(" "),t("p",[s._v("这部也可以在启用或关闭"),t("code",[s._v("windows")]),s._v("功能菜单中设置。")]),s._v(" "),t("h3",{attrs:{id:"步骤-4-下载-linux-内核更新包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-4-下载-linux-内核更新包"}},[s._v("#")]),s._v(" 步骤 4 - 下载 Linux 内核更新包")]),s._v(" "),t("p",[s._v("下载地址："),t("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"}},[s._v("适用于 x64 计算机的 WSL2 Linux 内核更新包"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("下载完成后运行上一步中下载的更新包")]),s._v(" "),t("h3",{attrs:{id:"步骤-5-将-wsl-2-设置为默认版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-5-将-wsl-2-设置为默认版本"}},[s._v("#")]),s._v(" 步骤 5 - 将 WSL 2 设置为默认版本")]),s._v(" "),t("p",[s._v("打开 PowerShell，然后在安装新的 Linux 发行版时运行以下命令，将 WSL 2 设置为默认版本：")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("wsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set-default")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("version 2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"步骤-6-安装所选的-linux-分发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤-6-安装所选的-linux-分发"}},[s._v("#")]),s._v(" 步骤 6 - 安装所选的 Linux 分发")]),s._v(" "),t("p",[s._v("打开 "),t("a",{attrs:{href:"https://aka.ms/wslstore",target:"_blank",rel:"noopener noreferrer"}},[s._v("Microsoft Store"),t("OutboundLink")],1),s._v('，搜索 Ubuntu，选择"获取"')]),s._v(" "),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/Snipaste_2021-03-31_00-32-13.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"安装-windows-终端-可选"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-windows-终端-可选"}},[s._v("#")]),s._v(" 安装 Windows 终端（可选）")]),s._v(" "),t("p",[s._v("参考文档：https://docs.microsoft.com/zh-CN/windows/terminal/install")]),s._v(" "),t("p",[s._v("在微软应用商城获取 "),t("strong",[s._v("Windows Terminal")]),s._v("。")]),s._v(" "),t("p",[s._v("关于这个终端工具的设置美化，后面再研究。")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20220414232541281.png",alt:"image-20220414232541281"}})]),s._v(" "),t("h2",{attrs:{id:"wsl2-与-windows-之间共享文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl2-与-windows-之间共享文件"}},[s._v("#")]),s._v(" WSL2 与 Windows 之间共享文件")]),s._v(" "),t("p",[s._v("由于 WSL2 为 Windows 原生支持的子系统所以无需设置即可直接共享目录等。")]),s._v(" "),t("ol",[t("li",[s._v("Windows 中直接访问 WSL2 中的文件或文件夹\n在 wsl 中输入如下命令，使用资源管理器 Explorer 打开当前的目录。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("explorer.exe "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20220414233148418.png",alt:"image-20220414233148418"}})]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在 WSL2 中所有的磁盘已被挂载到了 Linux发行版中/mnt 目录下，在此目录下默认会把 Windows 中所有已挂载的盘也映射到 /mnt目录下：")])]),s._v(" "),t("p",[t("img",{attrs:{src:"http://image.kongxiao.top/image-20220414233401466.png",alt:"image-20220414233401466"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);