<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>01-Redis入门及常用指令 | xiao blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/study-note/logo.png">
    <meta name="description" content="半路出家的 Java 学习之路">
    
    <link rel="preload" href="/study-note/assets/css/0.styles.6632e4e3.css" as="style"><link rel="preload" href="/study-note/assets/js/app.36ae5403.js" as="script"><link rel="preload" href="/study-note/assets/js/2.a329299a.js" as="script"><link rel="preload" href="/study-note/assets/js/19.7dcd0753.js" as="script"><link rel="prefetch" href="/study-note/assets/js/10.592e3819.js"><link rel="prefetch" href="/study-note/assets/js/11.4a3c536c.js"><link rel="prefetch" href="/study-note/assets/js/12.ef6ffd6b.js"><link rel="prefetch" href="/study-note/assets/js/13.f177cc62.js"><link rel="prefetch" href="/study-note/assets/js/14.bccdad65.js"><link rel="prefetch" href="/study-note/assets/js/15.07d4a46c.js"><link rel="prefetch" href="/study-note/assets/js/16.edc1994d.js"><link rel="prefetch" href="/study-note/assets/js/17.85d234e0.js"><link rel="prefetch" href="/study-note/assets/js/18.3d4c9688.js"><link rel="prefetch" href="/study-note/assets/js/20.6602f184.js"><link rel="prefetch" href="/study-note/assets/js/21.6d179b01.js"><link rel="prefetch" href="/study-note/assets/js/22.2a60b12b.js"><link rel="prefetch" href="/study-note/assets/js/23.195375d1.js"><link rel="prefetch" href="/study-note/assets/js/24.2f65969c.js"><link rel="prefetch" href="/study-note/assets/js/25.17101bf9.js"><link rel="prefetch" href="/study-note/assets/js/26.2707fbe5.js"><link rel="prefetch" href="/study-note/assets/js/27.d5d9742d.js"><link rel="prefetch" href="/study-note/assets/js/28.62d8a603.js"><link rel="prefetch" href="/study-note/assets/js/29.a7531d5f.js"><link rel="prefetch" href="/study-note/assets/js/3.d05807e0.js"><link rel="prefetch" href="/study-note/assets/js/30.580b9f5c.js"><link rel="prefetch" href="/study-note/assets/js/31.a594e726.js"><link rel="prefetch" href="/study-note/assets/js/32.9d1c1db0.js"><link rel="prefetch" href="/study-note/assets/js/33.322f1225.js"><link rel="prefetch" href="/study-note/assets/js/34.fcd29712.js"><link rel="prefetch" href="/study-note/assets/js/35.3cc41a16.js"><link rel="prefetch" href="/study-note/assets/js/36.d798da07.js"><link rel="prefetch" href="/study-note/assets/js/37.f60cd574.js"><link rel="prefetch" href="/study-note/assets/js/38.de2eef58.js"><link rel="prefetch" href="/study-note/assets/js/39.71d5f07c.js"><link rel="prefetch" href="/study-note/assets/js/4.9a4eead2.js"><link rel="prefetch" href="/study-note/assets/js/40.6540463c.js"><link rel="prefetch" href="/study-note/assets/js/41.05892002.js"><link rel="prefetch" href="/study-note/assets/js/42.57ea4b3c.js"><link rel="prefetch" href="/study-note/assets/js/43.e987ac78.js"><link rel="prefetch" href="/study-note/assets/js/44.c8453269.js"><link rel="prefetch" href="/study-note/assets/js/45.70d6a23f.js"><link rel="prefetch" href="/study-note/assets/js/46.397182aa.js"><link rel="prefetch" href="/study-note/assets/js/47.ac769bd1.js"><link rel="prefetch" href="/study-note/assets/js/48.61ddb0cd.js"><link rel="prefetch" href="/study-note/assets/js/49.ba4697b8.js"><link rel="prefetch" href="/study-note/assets/js/5.c403311f.js"><link rel="prefetch" href="/study-note/assets/js/50.403d6c80.js"><link rel="prefetch" href="/study-note/assets/js/51.3adb3e8a.js"><link rel="prefetch" href="/study-note/assets/js/52.04e3c726.js"><link rel="prefetch" href="/study-note/assets/js/53.f5fdc08d.js"><link rel="prefetch" href="/study-note/assets/js/6.2d6870b8.js"><link rel="prefetch" href="/study-note/assets/js/7.7b5df3ca.js"><link rel="prefetch" href="/study-note/assets/js/8.a9c4a092.js"><link rel="prefetch" href="/study-note/assets/js/9.2194814d.js">
    <link rel="stylesheet" href="/study-note/assets/css/0.styles.6632e4e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-note/" class="home-link router-link-active"><img src="/study-note/logo.png" alt="xiao blog" class="logo"> <span class="site-name can-hide">xiao blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-note/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study-note/pages/ComputerBasics/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/study-note/pages/DataStructures&amp;Algorithms/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/basic/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/concurrent/" class="nav-link">
  并发
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/JVM/" class="nav-link">
  JVM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Database/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Database/Redis/" class="nav-link router-link-active">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SSM/" class="nav-link">
  SSM
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringBoot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringCloud/" class="nav-link">
  SpringCloud
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/more/tools/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/xiaokong0510" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-note/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study-note/pages/ComputerBasics/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/study-note/pages/DataStructures&amp;Algorithms/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/basic/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/concurrent/" class="nav-link">
  并发
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/JVM/" class="nav-link">
  JVM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Database/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Database/Redis/" class="nav-link router-link-active">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SSM/" class="nav-link">
  SSM
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringBoot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringCloud/" class="nav-link">
  SpringCloud
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/more/tools/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/xiaokong0510" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/study-note/pages/Database/Redis/" class="sidebar-heading clickable router-link-active open"><span>Redis </span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-note/pages/Database/Redis/01-Redis入门及常用指令.html" class="active sidebar-link">01-Redis入门及常用指令</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_01-redis入门及常用指令"><a href="#_01-redis入门及常用指令" class="header-anchor">#</a> 01-Redis入门及常用指令</h1> <p>课程链接：<a href="https://www.bilibili.com/video/BV1cr4y1671t" target="_blank" rel="noopener noreferrer">黑马程序员Redis入门到实战教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>内容包括：</p> <ol><li>Redis 基本特征、安装；</li> <li>Redis 的常见数据结构</li> <li>Redis 的常用指令</li></ol> <h2 id="nosql"><a href="#nosql" class="header-anchor">#</a> NoSQL</h2> <ul><li>NoSQL 仅仅是一个概念，泛指<strong>非关系型的数据库</strong>，即<code>non-relational</code>，也有叫做&quot;<em><strong>Not Only SQL</strong></em>&quot;</li> <li>区别于关系数据库，它们不保证关系数据的 ACID 特性</li> <li>常见的 NoSQL 数据库有：<code>Redis</code>、<code>MemCache</code>、<code>MongoDB</code>等</li></ul> <p>NoSQL 与 SQL 的差异：</p> <p><img src="https://image.kongxiao.top/202301071306839.png" alt="image-20230107130356052"></p> <h2 id="redis-的特征"><a href="#redis-的特征" class="header-anchor">#</a> Redis 的特征</h2> <p>Redis 全称 <code>Remote Dictionary Server</code>，远程词典服务器，是一个基于内存的键值型 NoSQL 数据库。</p> <p>特征：</p> <ul><li>键值（<code>key-value</code>）型，value 支持多种不同数据结构，功能丰富</li> <li>单线程，每个命令具备原子性</li> <li>低延迟，速度快（<strong>基于内存</strong>、IO 多路复用、良好的编码）</li> <li>支持数据持久化</li> <li>支持主从集群、分片集群</li> <li>支持多语言客户端</li></ul> <h2 id="redis-的安装"><a href="#redis-的安装" class="header-anchor">#</a> Redis 的安装</h2> <p>docker 下安装 Redis 步骤：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 拉取redis镜像</span>
<span class="token function">docker</span> pull redis:6.2.6

<span class="token comment"># 创建conf文件夹，data文件夹用于挂载</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/redis/conf
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/redis/data
<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> /usr/local/redis

<span class="token comment">## 下载redis配置文件</span>
<span class="token comment">## 配置文件获取地址https://redis.io/docs/manual/config/</span>
<span class="token builtin class-name">cd</span> /usr/local/redis/conf
<span class="token function">wget</span> https://raw.githubusercontent.com/redis/redis/6.2/redis.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>修改<code>redis.conf</code>文件中的一些配置</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问</span>
<span class="token comment"># bind 0.0.0.0</span>
<span class="token comment"># 保护模式，设置为yes，并且没有bind指令，没有设置密码，则只允许在本机的回环连接，其他机器无法连接</span>
protected-mode no
<span class="token comment"># 可选，访问密码</span>
requirepass <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>创建容器并运行：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 创建容器，设置端口映射，文件挂载</span>
<span class="token function">docker</span> run <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--name</span> redis <span class="token punctuation">\</span>
<span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /usr/local/redis/data:/data <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /usr/local/redis/conf:/usr/local/etc/redis <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> redis:6.2.6 <span class="token punctuation">\</span>
redis-server /usr/local/etc/redis/redis.conf  <span class="token punctuation">\</span>
<span class="token parameter variable">--appendonly</span> <span class="token function">yes</span>

<span class="token comment"># 进入容器</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器ID  redis-cli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Redis 其他常用配置：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 监听的端口</span>
port <span class="token number">6379</span>
<span class="token comment"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span>
<span class="token function">dir</span> <span class="token builtin class-name">.</span>
<span class="token comment"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span>
databases <span class="token number">1</span>
<span class="token comment"># 设置redis能够使用的最大内存</span>
maxmemory 512mb
<span class="token comment"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span>
logfile <span class="token string">&quot;redis.log&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="redis-常见数据结构"><a href="#redis-常见数据结构" class="header-anchor">#</a> Redis 常见数据结构</h2> <p>Redis 是一个 key-value 的数据库，key 一般是 String 类型，value 的类型多种多样：</p> <ul><li>String：字符串</li> <li>List：有序、可重复集合</li> <li>Hash：无序字典</li> <li>Set：无序、不可重复集合</li> <li>Sorted Set：有序、不可重复集合</li></ul> <p><img src="https://image.kongxiao.top/202301052244162.png" alt="image-20220524205926164"></p> <h2 id="redis-常用指令"><a href="#redis-常用指令" class="header-anchor">#</a> Redis 常用指令</h2> <p>官网：<a href="https://redis.io/" target="_blank" rel="noopener noreferrer">https://redis.io/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，<a href="http://www.redis.cn/" target="_blank" rel="noopener noreferrer">http://www.redis.cn/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Redis 命令参考： <a href="http://www.redis.cn/commands.html" target="_blank" rel="noopener noreferrer">http://www.redis.cn/commands.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，<a href="http://doc.redisfans.com/" target="_blank" rel="noopener noreferrer">http://doc.redisfans.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="key-键"><a href="#key-键" class="header-anchor">#</a> Key（键）</h3> <blockquote><p>key 的格式一般为 [项目名]:[业务名]:[类型]:[id]</p></blockquote> <p><strong>查找/扫描：</strong></p> <ul><li><code>KEYS pattern</code>  ：查找所有符合给定模式 pattern 的 key ：
<ul><li>KEYS * ：匹配数据库中所有 key</li> <li>KEYS h?llo ：匹配 hello ， hallo 和 hxllo 等</li> <li>KEYS h*llo ：匹配 hllo 和 heeeeello 等</li> <li>KEYS h[ae]llo ：匹配 hello 和 hallo ，但不匹配 hillo</li></ul></li></ul> <p><strong>检查/ 删除 /移动 key：</strong></p> <ul><li><code>EXISTS key</code>  ：若 key 存在返回 1 ，否则返回 0 ；</li> <li><code>DEL key [key ...]</code> ：删除一个或多个 key，返回被删除 key 的数量，忽略不存在的 key ；</li> <li><code>MOVE key db</code> ：移动到给定的数据库 db 当中，成功返回 1 ，失败则返回 0 ；</li> <li><code>TYPE key</code>  ： 返回 key 所储存的值的类型</li> <li><code>RENAME key newkey</code> ：改名，当  key 不存在时，返回一个错误；当 newkey 已经存在时，将覆盖旧值</li></ul> <p><strong>生存时间：</strong></p> <ul><li><code>TTL key</code>  ：  TTL, time to live，以 s 为单位</li> <li><code>PTTL key</code> ：以 ms 为单位
<ul><li>当 key 不存在时，返回 -2 ；</li> <li>当 key 存在但没有设置剩余生存时间时，返回 -1 ；</li> <li>否则，返回 key 的剩余生存时间</li></ul></li> <li><code>EXPIRE key seconds</code>  ： 设置生存时间，单位为 s，设置成功返回 1，</li> <li><code>PEXPIRE key milliseconds</code>  ： 设置生存时间，单位为 ms</li> <li><code>EXPIREAT key timestamp</code>  ： 设置生存时间，参数为 UNIX 时间戳</li> <li><code>PEXPIREAT key milliseconds-timestamp</code>  ： 设置生存时间，以毫秒为单位的 UNIX 时间戳</li> <li><code>PERSIST key timestamp</code>  ： 将给定 key 的生存时间设置为永久；成功则返回 1 ；如果 key 不存在或 key 没有设置生存时间，返回 0</li></ul> <h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <blockquote><p>String 类型，也就是字符串类型，是 Redis 中最简单的存储类型。</p></blockquote> <p><strong>基本操作：</strong></p> <ul><li><code>SET key value [EX seconds] [PX milliseconds] [NX|XX]</code>  ： 设置 key-value 类型的值，key 已经存在则覆写旧值并清除原有 TTL 。支持以下参数：
<ul><li>EX second ：设置键的过期时间为 second 秒。 <code>SET key value EX second</code> 效果等同于 <code>SETEX key second value</code></li> <li>PX millisecond ：设置键的过期时间为 millisecond 毫秒。 SET key value PX millisecond 效果等同于 <code>PSETEX key millisecond value</code></li> <li>NX ：只在键不存在时，才对键进行设置操作。 <code>SET key value NX</code> 效果等同于 <code>SETNX key value</code></li> <li>XX ：只在键已经存在时，才对键进行设置操作。</li></ul></li> <li><code>GET key</code>  ： 根据 key 获得对应的 value，如果 key 不存在那么返回特殊值 nil</li> <li><code>STRLEN key</code>  ： 返回 key 所储存的字符串值的长度</li> <li><code>SETEX key seconds value</code>  ： 设置 vaule 的同时指定 TTL，单位为 s</li> <li><code>SETNX key value</code>  ：即 <strong>SET if Not eXists</strong>。  key 不存在时才设置，返回 1 ；key 已存在则返回 0</li></ul> <p><strong>批量设置：</strong></p> <ul><li><code>MSET key value [key value ...]</code>  ： 批量设置多个 key-value 对；是一个原子性操作</li> <li><code>MGET key [key ...]</code>  ：返回所有(一个或多个)给定 key 的值</li></ul> <p><strong>计数器：</strong></p> <ul><li><code>INCR key</code> ： value 自增 1；如果 key 不存在，则先初始化为 0 ，然后再执行 INCR 操作</li> <li><code>INCRBY key increment</code>  ：指定自增量为 increment</li> <li><code>DECR key</code> ： value 自减 1；如果 key 不存在，则先初始化为 0  ，然后再执行 DECR 操作</li> <li><code>DECRBY key decrement</code> ：指定自减量为 decrement</li></ul> <h3 id="hash"><a href="#hash" class="header-anchor">#</a> Hash</h3> <blockquote><p>Hash 类型，也叫散列，其 value 是一个无序字典，类似于Java 中的<code>HashMap</code>结构。</p></blockquote> <p>Hash 结构可以将对象中的每个字段独立存储，可以针对单个字段做 CRUD</p> <img src="https://image.kongxiao.top/202301052254423.png"> <p>常用指令：</p> <ul><li><code>HSET key filed value [filed value ...]</code>：设置 key 中的域 field 的值设为 value</li> <li><code>HGET key filed</code>：返回指定 key 中给定域 field 的值</li> <li><code>HMGET key field [field ...]</code>：返回哈希表 key 中，一个或多个给定域的值</li> <li><code>HLEN key</code>：返回指定 key 中域的数量</li> <li><code>HGETALL key</code>：返回指定 key 所有的域和值</li> <li><code>HEXISTS key filed</code>：查看指定 key、指定域 field 是否存在</li> <li><code>HDEL key filed[field ...]</code>：删除指定 key 中，一个或多个给定的 field</li> <li><code>HKEYS key</code>：返回指定 key 中，所有的 field</li> <li><code>HVALS key</code>：返回指定 key，所有的 field 的 value</li> <li><code>HSETNX key field value</code>：当且仅当域 field 不存在时，将指定 key 中的域 field 的值设置为 value</li> <li><code>HINCRBY key field increment</code>：为指定 key 中的域 field 的值加上增量 increment</li></ul> <h3 id="list"><a href="#list" class="header-anchor">#</a> List</h3> <blockquote><p>Redis 中的 List 类型与 Java 中的 LinkedList 类似，可以看做是一个双向链表结构。既可以支持正向检索和也可以支持反向检索。</p></blockquote> <p>特征也与<code>LinkedList</code>类似：</p> <ul><li>有序</li> <li>元素可以重复</li> <li>插入和删除快</li> <li>查询速度一般</li></ul> <p>常用来存储一个有序数据，例如：朋友圈点赞列表，评论列表等。常用指令：</p> <ul><li><code>RPUSH key value [value ...]</code> ：右边插入；返回执行 RPUSH 操作后，表的长度</li> <li><code>LPOP key</code> ：移除并返回列表 key 最左边的元素</li> <li><code>LPUSH key value [value ...]</code> ：左边插入；返回执行 LRPUSH 操作后，表的长度</li> <li><code>RPOP key</code> ：移除并返回列表 key 最右边的元素</li> <li><code>BLPOP key timeout</code>：阻塞版的 <code>LPOP</code>，在没有元素时等待指定时间</li> <li><code>BRPOP key timeout</code>：阻塞版的 <code>BRPOP</code>，在没有元素时等待指定时间</li></ul> <p><img src="https://image.kongxiao.top/20210922175322.png" alt="redis-list"></p> <ul><li><code>LLEN key</code>：返回列表 key 的长度，如果 key 不存在则返回 0，如果 key 不是列表类型，返回一个错误</li> <li><code>LRANGE key start stop</code> ：返回列表 key 中指定区间内的元素，-1 表示倒数第一</li> <li><code>LINDEX key index</code> ：返回列表 key 中，下标为 index 的元素</li> <li><code>LINSERT key BEFORE|AFTER pivot value</code> ：将值 value 插入到列表 key 中，位于值 pivot 之前或之后。
<ul><li>当 pivot 不存在于列表 key 时，不执行任何操作；</li> <li>当 key 不存在时， key 被视为空列表，不执行任何操作；</li> <li>如果 key 不是列表类型，返回一个错误；</li> <li>如果命令执行成功，返回插入操作完成之后，列表的长度；</li> <li>如果没有找到 pivot ，返回 -1 ；</li> <li>如果 key 不存在或为空列表，返回 0</li></ul></li> <li><code>LREM key count value</code>：移除列表中与参数 value 相等的元素。返回被移除元素的数量：
<ul><li>count &gt; 0 : 从表头开始向表尾搜索，移除与 value 相等的元素，数量为 count ；</li> <li>count &lt; 0 : 从表尾开始向表头搜索，移除与 value 相等的元素，数量为 count 的绝对值；</li> <li>count = 0 : 移除表中所有与 value 相等的值</li></ul></li></ul> <h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <blockquote><p>Redis 的 Set 结构与 Java 中的 HashSet 类似，可以看做是一个 value 为 null 的 HashMap，具备与 HashSet 类似的特征</p></blockquote> <ul><li>无序</li> <li>元素不可重复</li> <li>查找快</li> <li>支持交集、并集、差集等功能</li></ul> <p><strong>常用命令：</strong></p> <ul><li><code>SADD key member [member ...]</code> ：添加元素</li> <li><code>SMEMBERS key</code>：查看所有元素</li> <li><code>SISMEMBER key member</code>：判断 member 元素是否是集合 key 的成员</li> <li><code>SCARD key</code>：查看元素个数</li> <li><code>SREM key member [member ...]</code>：移除集合 key 中一个或多个 member ，不存在的 member 会被忽略</li> <li><code>SPOP key</code>：移除并返回集合中的一个随机元素</li> <li><code>SMOVE source destination member</code>：将 member 元素从 source 集合移动到 destination 集合</li></ul> <p><strong>数学集合类：</strong></p> <ul><li><code>SDIFF key [key ...]</code>：返回所有给定集合之间的差集</li> <li><code>SINNER key [key ...]</code>：返回所有给定集合之间的交集</li> <li><code>SUNION key [key ...]</code>：返回所有给定集合之间的并集</li> <li><code>SDIFFSTORE destination key [key ...]</code>：返回所有给定集合之间的差集，将结果保存到 destination</li> <li><code>SINNERSTORE destination key [key ...]</code>：返回所有给定集合之间的交集，将结果保存到 destination</li> <li><code>SUNIONSTORE destination key [key ...]</code>：返回所有给定集合之间的并集，将结果保存到 destination</li></ul> <p>交集、差集、并集图示：</p> <p><img src="https://image.kongxiao.top/202301052259705.png" alt="image-20220525112632214"></p> <h3 id="zset-sorted-set"><a href="#zset-sorted-set" class="header-anchor">#</a> ZSet（Sorted Set）</h3> <blockquote><p>Redis 的 SortedSet 是一个可排序的 set 集合，SortedSet 中的每一个元素都带有一个 score 属性，可以基于score 属性对元素排序，底层的实现是一个跳表（SkipList）加 hash表。</p></blockquote> <p>在 Set 基础上，加上一个 scroe 值，SortedSet 具备下列特性：</p> <ul><li>可排序</li> <li>元素不重复</li> <li>查询速度快</li></ul> <p>因为 SortedSe的可排序特性，经常被用来实现排行榜这样的功能。</p> <p>常见命令：</p> <ul><li><code>ZADD key score member [[score member] [score member] ...]</code>：添加元素，指定 score 值</li> <li><code>ZRANGE key start stop [WITHSCORES]</code>：返回指定区间内的成员，按 score 值递增排序</li> <li><code>ZREVRANGE key start stop [WITHSCORES]</code>：同上，逆序</li> <li><code>ZRANGEBYSCORE key min max [WITHSCORES]</code>：返回指定 score 区间内的成员，按 score 值递增排序</li> <li><code>ZREVRANGEBYSCORE key min max [WITHSCORES]</code>：同上，逆序</li> <li><code>ZSCORE key member</code>：返回有序集 key 中，成员 member 的 score 值</li> <li><code>ZRANK key member</code>：返回有序集 key 中成员 member 的排名</li> <li><code>ZCARD key</code>：查看元素个数</li> <li><code>ZCOUNT key min max</code>：返回 score 在 min 和 max 之间的成员数量</li> <li><code>ZREM key member [member ...]</code>：移除有序集 key 中的一个或多个成员</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/7/2023, 7:36:37 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/study-note/assets/js/app.36ae5403.js" defer></script><script src="/study-note/assets/js/2.a329299a.js" defer></script><script src="/study-note/assets/js/19.7dcd0753.js" defer></script>
  </body>
</html>
