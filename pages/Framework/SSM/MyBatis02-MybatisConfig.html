<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MyBatis(二)----核心配置文件、sql映射文件 | xiao blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/study-note/logo.png">
    <meta name="description" content="半路出家的 Java 学习之路">
    
    <link rel="preload" href="/study-note/assets/css/0.styles.0a4146bd.css" as="style"><link rel="preload" href="/study-note/assets/js/app.cf42b68c.js" as="script"><link rel="preload" href="/study-note/assets/js/2.a46c0893.js" as="script"><link rel="preload" href="/study-note/assets/js/18.5d91c0df.js" as="script"><link rel="prefetch" href="/study-note/assets/js/10.70b9e1c3.js"><link rel="prefetch" href="/study-note/assets/js/11.873f24f0.js"><link rel="prefetch" href="/study-note/assets/js/12.24ec706a.js"><link rel="prefetch" href="/study-note/assets/js/13.63a1f1ac.js"><link rel="prefetch" href="/study-note/assets/js/14.ded0c8ff.js"><link rel="prefetch" href="/study-note/assets/js/15.8774dd7b.js"><link rel="prefetch" href="/study-note/assets/js/16.4a8039a2.js"><link rel="prefetch" href="/study-note/assets/js/17.30e90002.js"><link rel="prefetch" href="/study-note/assets/js/19.abcd4bc1.js"><link rel="prefetch" href="/study-note/assets/js/20.f131a49f.js"><link rel="prefetch" href="/study-note/assets/js/21.ef4c6972.js"><link rel="prefetch" href="/study-note/assets/js/22.e81700e0.js"><link rel="prefetch" href="/study-note/assets/js/23.4b340b61.js"><link rel="prefetch" href="/study-note/assets/js/24.15807cb4.js"><link rel="prefetch" href="/study-note/assets/js/25.e2265404.js"><link rel="prefetch" href="/study-note/assets/js/26.4bccdb22.js"><link rel="prefetch" href="/study-note/assets/js/27.acc5a154.js"><link rel="prefetch" href="/study-note/assets/js/28.6303e808.js"><link rel="prefetch" href="/study-note/assets/js/29.4f135e26.js"><link rel="prefetch" href="/study-note/assets/js/3.972304b8.js"><link rel="prefetch" href="/study-note/assets/js/30.b1557a75.js"><link rel="prefetch" href="/study-note/assets/js/31.bc4dac61.js"><link rel="prefetch" href="/study-note/assets/js/32.465825f0.js"><link rel="prefetch" href="/study-note/assets/js/33.cdd29ad2.js"><link rel="prefetch" href="/study-note/assets/js/34.9ca320c9.js"><link rel="prefetch" href="/study-note/assets/js/35.9d4c86ee.js"><link rel="prefetch" href="/study-note/assets/js/36.4da200ad.js"><link rel="prefetch" href="/study-note/assets/js/37.3d0b6aa6.js"><link rel="prefetch" href="/study-note/assets/js/38.e037d465.js"><link rel="prefetch" href="/study-note/assets/js/39.42197d51.js"><link rel="prefetch" href="/study-note/assets/js/4.810a9dda.js"><link rel="prefetch" href="/study-note/assets/js/40.bd5a2c07.js"><link rel="prefetch" href="/study-note/assets/js/41.cda0b71f.js"><link rel="prefetch" href="/study-note/assets/js/42.0f5498a3.js"><link rel="prefetch" href="/study-note/assets/js/43.58cf8781.js"><link rel="prefetch" href="/study-note/assets/js/44.7b941b05.js"><link rel="prefetch" href="/study-note/assets/js/45.5fa838dc.js"><link rel="prefetch" href="/study-note/assets/js/46.659efba2.js"><link rel="prefetch" href="/study-note/assets/js/47.87c31dde.js"><link rel="prefetch" href="/study-note/assets/js/48.3aee5fe2.js"><link rel="prefetch" href="/study-note/assets/js/49.866b5e73.js"><link rel="prefetch" href="/study-note/assets/js/5.7b7c443b.js"><link rel="prefetch" href="/study-note/assets/js/50.d2e81187.js"><link rel="prefetch" href="/study-note/assets/js/6.723ea6d4.js"><link rel="prefetch" href="/study-note/assets/js/7.33a4fc23.js"><link rel="prefetch" href="/study-note/assets/js/8.915c66d9.js"><link rel="prefetch" href="/study-note/assets/js/9.ec1dee1c.js">
    <link rel="stylesheet" href="/study-note/assets/css/0.styles.0a4146bd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-note/" class="home-link router-link-active"><img src="/study-note/logo.png" alt="xiao blog" class="logo"> <span class="site-name can-hide">xiao blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-note/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study-note/pages/ComputerBasics/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/study-note/pages/DataStructures&amp;Algorithms/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/basic/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/concurrent/" class="nav-link">
  并发
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/JVM/" class="nav-link">
  JVM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Databases/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Databases/Redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SSM/" class="nav-link router-link-active">
  SSM
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringBoot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringCloud/" class="nav-link">
  SpringCloud
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/more/tools/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/xiaokong0510" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-note/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study-note/pages/ComputerBasics/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/study-note/pages/DataStructures&amp;Algorithms/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/basic/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/concurrent/" class="nav-link">
  并发
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Java/JVM/" class="nav-link">
  JVM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Databases/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Databases/Redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SSM/" class="nav-link router-link-active">
  SSM
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringBoot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/study-note/pages/Framework/SpringCloud/" class="nav-link">
  SpringCloud
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-note/pages/more/tools/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/xiaokong0510" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/study-note/pages/Framework/SSM/MyBatis01-JDBC" class="sidebar-heading clickable open"><span>MyBatis </span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-note/pages/Framework/SSM/MyBatis01-JDBC.html" class="sidebar-link">原生JDBC</a></li><li><a href="/study-note/pages/Framework/SSM/MyBatis02-MybatisConfig.html" aria-current="page" class="active sidebar-link">核心配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-note/pages/Framework/SSM/MyBatis02-MybatisConfig.html#_1-mybatis-简介" class="sidebar-link">1. MyBatis 简介</a></li><li class="sidebar-sub-header"><a href="/study-note/pages/Framework/SSM/MyBatis02-MybatisConfig.html#_2-mybatis-入门案例" class="sidebar-link">2. MyBatis 入门案例</a></li><li class="sidebar-sub-header"><a href="/study-note/pages/Framework/SSM/MyBatis02-MybatisConfig.html#_3-几个重要类的说明" class="sidebar-link">3. 几个重要类的说明</a></li><li class="sidebar-sub-header"><a href="/study-note/pages/Framework/SSM/MyBatis02-MybatisConfig.html#_4-全局配置文件" class="sidebar-link">4. 全局配置文件</a></li><li class="sidebar-sub-header"><a href="/study-note/pages/Framework/SSM/MyBatis02-MybatisConfig.html#_5-映射文件" class="sidebar-link">5. 映射文件</a></li></ul></li><li><a href="/study-note/pages/Framework/SSM/MyBatis03-Association&amp;Collection.html" class="sidebar-link">一对多、多对一</a></li><li><a href="/study-note/pages/Framework/SSM/MyBatis04-DynamicSql&amp;Cache.html" class="sidebar-link">动态SQL和缓存</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/study-note/pages/Framework/SSM/Spring01-IOC" class="sidebar-heading clickable"><span>Spring</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-note/pages/Framework/SSM/Spring01-IOC.html" class="sidebar-link">IOC和依赖注入</a></li><li><a href="/study-note/pages/Framework/SSM/Spring02-AOP.html" class="sidebar-link">动态代理和AOP</a></li><li><a href="/study-note/pages/Framework/SSM/Spring03-Transaction.html" class="sidebar-link">声明式事务</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mybatis-二-核心配置文件、sql映射文件"><a href="#mybatis-二-核心配置文件、sql映射文件" class="header-anchor">#</a> MyBatis(二)----核心配置文件、sql映射文件</h1> <p>MyBatis学习笔记(二)， 内容包括：</p> <ol><li>MyBatis入门案例</li> <li>MyBatis核心配置文件结构说明</li> <li>sql映射文件结构说明</li> <li>查询结果封装resultMap</li></ol> <p>学习视频：尚硅谷雷丰阳老师MyBatis</p> <p>https://www.bilibili.com/video/BV1bb411A7bD</p> <h2 id="_1-mybatis-简介"><a href="#_1-mybatis-简介" class="header-anchor">#</a> 1. MyBatis 简介</h2> <p>连接数据库的方法：</p> <p><strong>工具：</strong> JDBC→Dbutils(QueryRunner)→JdbcTemplate</p> <p><img src="http://image.kongxiao.top/image-20200607234736779.png" alt="image-20200607234736779"></p> <p><strong>框架：</strong> 整体解决方案</p> <p><strong>Hibernate：</strong> 全自动全映射ORM（Object Relation Mapping）框架，旨在消除SQL</p> <p><img src="http://image.kongxiao.top/image-20200607234852037.png" alt="image-20200607234852037"></p> <p>缺点：</p> <ol><li><p>长难复杂SQL，对于Hibernate而言处理也不容易</p></li> <li><p>内部自动生产的SQL，不容易做特殊优化。对开发人员而言，核心SQL还是需要自己优化 ( <strong>HQL</strong> )</p></li> <li><p>基于全映射的全自动框架，大量字段的POJO进行部分映射时比较困难，导致数据库性能下降</p></li></ol> <p><strong>SQL和Java编码分开，功能边界清晰，一个专注业务、一个专注数据。</strong></p> <p><strong>MyBatis：</strong> 半自动，轻量级的框架，sql语句提取到配置文件中编写</p> <p><img src="http://image.kongxiao.top/image-20200608225144698.png" alt="image-20200608225144698"></p> <ul><li><p>MyBatis 是一个半自动化的持久化层框架，支持自定义 SQL、存储过程以及高级映射。</p></li> <li><p>MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。</p></li> <li><p>MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO映射成数据库中的记录。</p></li> <li><p>项目地址：https://github.com/mybatis/mybatis-3/</p></li> <li><p>Maven 依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>x.x.x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <p>官方文档：https://mybatis.org/mybatis-3/zh/index.html</p> <h2 id="_2-mybatis-入门案例"><a href="#_2-mybatis-入门案例" class="header-anchor">#</a> 2. MyBatis 入门案例</h2> <p>核心步骤：</p> <ol><li><p>数据库表与对应的<strong>实体类Employee</strong> 、<strong>接口EmployeeMapper;</strong></p></li> <li><p>全局配置文件(核心配置文件) <strong>mybatis-config.xml;</strong></p></li> <li><p>根据全局配置文件创建<strong>SqlSessionFactory</strong>对象：</p> <p><code>SqlSessionFactoryBulid → SqlSessionFactory → SqlSession</code></p></li> <li><p>SQL 映射文件<strong>EmployeeMapper.xml</strong>，配置了每一个SQL，以及SQL的封装规则，<strong>需要在全局配置文件中注册SQL映射文件；</strong></p></li> <li><p>由sqlSession 对象实例执行 SQL 语句，或者获取接口的代理对象执行</p></li></ol> <h3 id="_2-1-数据库环境"><a href="#_2-1-数据库环境" class="header-anchor">#</a> 2.1 数据库环境</h3> <p>创建tbl_employee表并插入三条数据：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tbl_employee<span class="token punctuation">(</span>
id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  
last_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl_employee <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;lisi@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;wangwu@126.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-2-创建实体类"><a href="#_2-2-创建实体类" class="header-anchor">#</a> 2.2 创建实体类</h3> <ol><li>新建一个普通的Maven项目；</li> <li>在pom.xml文件中导入Maven依赖，包括：<strong>mysql-connector-java，mybatisjuint，log4j</strong></li> <li>创建与数据库表对应的实体类Employee，名称与数据库表的字段保持一致。如果不一致查询会出问题，可以用别名解决</li></ol> <ul><li>项目依赖：</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mybatis--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li>实体类com.xiao.mybatis.entity.Employee：</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span> <span class="token comment">//注意，该名称与数据库表的字段名不一致，查询会出现问题，可以用别名解决</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-3-mybatis核心配置文件"><a href="#_2-3-mybatis核心配置文件" class="header-anchor">#</a> 2.3 MyBatis核心配置文件</h3> <ul><li><p>在resources目录下编写mybatis核心配置文件：mybatis-config.xml</p> <p>包含信息：数据库连接参数、事务类型、注册映射文件</p></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--mybatis核心配置文件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--配置环境组，选择默认的环境id--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--配置单个环境并指定id为development--&gt;</span>
        <span class="token comment">&lt;!--可以同时配置多个环境，但是只能选择一个使用--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--配置事务管理类型，JDBC--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--配置连接池POOLED--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--数据库连接池4个参数--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--配置映射,注册Mapper文件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>EmployeeMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>注意：</p> <blockquote><p>在xml配置文件中，url中的 &amp; 符号需要写成 <code>&amp;amp;</code></p></blockquote> <h3 id="_2-4-sql映射文件"><a href="#_2-4-sql映射文件" class="header-anchor">#</a> 2.4 sql映射文件</h3> <p>在resources目录下表编写sql映射文件：EmployeeMapper.xml</p> <p>sql语句的参数用#获取</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--namespace:名称空间，可以绑定一个Mapper接口--&gt;</span>
<span class="token comment">&lt;!--编写sql语句--&gt;</span>
<span class="token comment">&lt;!--id：唯一标识，如果有Mapper接口文件，需要对应其中的方法名--&gt;</span>
<span class="token comment">&lt;!--resultType：对应返回结果类型--&gt;</span>
<span class="token comment">&lt;!--#{id}：从传递过来的参数中取出id值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xiao.dao.EmployeeMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectEmp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xiao.mybatis.entity.Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select  * from tbl_employee where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_2-5-测试"><a href="#_2-5-测试" class="header-anchor">#</a> 2.5 测试</h3> <p>根据全局配置文件创建<strong>SqlSessionFactory</strong>对象，</p> <p><code>SqlSessionFactoryBulid → SqlSessionFactory → SqlSession</code>。由sqlSession对象实例执行sql语句。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> resourceUrl <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resourceUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// SqlSessionFactoryBuilder对象获取SqlSessionFactory对象</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 由SqlSession工厂获得SqlSession对象，使用其进行增删改查</span>
        <span class="token comment">// 一个sqlSession就是和数据库的一次会话，使用完之后需要关闭资源</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//sqlSession，直接执行已经映射的sql语句</span>
            <span class="token comment">//selectOne()中两个参数：sql的唯一标识(对应sql映射文件中的namespace.id)和执行sql需要的参数</span>
            <span class="token class-name">Employee</span> employee <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">&quot;com.xiao.mybatis.mapper.EmployeeMapper.selectEmp&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>查询结果：</p> <blockquote><p>Employee{id=1, lastName='null', email='zhangsan@qq.com', gender='0'}</p></blockquote> <p>由于实体类的成员变量名和字段名不一致，因此lastName查询结果为null，可以在sql语句中取别名解决，</p> <p>也可以在sql映射文件中配置，后面会讲到。</p> <p>修改sql语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">select</span>  id<span class="token punctuation">,</span>last_name lastName<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>email <span class="token keyword">from</span> tbl_employee <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token comment">#{id}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询结果：</p> <blockquote><p>Employee{id=1, lastName='zhansgan', email='zhangsan@qq.com', gender='0'}</p></blockquote> <h3 id="_2-6-接口文件"><a href="#_2-6-接口文件" class="header-anchor">#</a> 2.6 接口文件</h3> <p>一种更有效的方法：创建接口文件com.xiao.mybatis.mapper.EmployeeMapper与sql映射文件绑定，在接口文件中定义方法，可以声明操作的返回值和参数。</p> <p>注意：</p> <ol><li>sql映射文件中的namesapce要与对应的接口文件全路径名一致</li> <li>sql映射文件中的sql语句标签中的id要与对应的接口文件中的方法名一致</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//定义一个查询方法</span>
    <span class="token class-name">Employee</span> <span class="token function">selectEmp</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>测试文件：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//获得接口文件的代理对象，执行方法</span>
    <span class="token class-name">EmployeeMapper</span> employeeMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmployeeMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employeeMapper<span class="token punctuation">.</span><span class="token function">selectEmp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_3-几个重要类的说明"><a href="#_3-几个重要类的说明" class="header-anchor">#</a> 3. 几个重要类的说明</h2> <h3 id="_3-1-sqlsessionfactorybuilder"><a href="#_3-1-sqlsessionfactorybuilder" class="header-anchor">#</a> 3.1 SqlSessionFactoryBuilder</h3> <ul><li><p>构造器SqlSessionFactoryBuilder ，可以从 XML 配置文件或一个预先配置的 Configuration 实例来构建出 SqlSessionFactory 实例。</p></li> <li><p>方法： <code>build(InputStream in)</code></p></li></ul> <h3 id="_3-2-sqlsessionfactory"><a href="#_3-2-sqlsessionfactory" class="header-anchor">#</a> 3.2 SqlSessionFactory</h3> <ul><li>SqlSession工厂，每个基于 MyBatis 的应用都以一个 SqlSessionFactory 的实例为核心，由SqlSessionFactoryBuilder类创建。</li> <li>SqlSessionFactory类可以用于创建SqlSession类，方法：<code>openSession()</code>,传入参数true可以设置为自动提交事务。</li></ul> <h3 id="_3-3-sqlsession"><a href="#_3-3-sqlsession" class="header-anchor">#</a> 3.3 SqlSession</h3> <ul><li>SqlSession代表和数据库的一次会话，用完必须关闭，是非线程安全的。可以从SqlSessionFactory中获得 SqlSession 的实例；</li> <li>SqlSession 提供了在数据库执行 SQL 命令所需的所有方法，可以通过 SqlSession 实例来获得映射器接口的代理对象，即接口和xml文件进行绑定。方法：<code>getMapper()</code>，需要传入mapper接口的class类型参数UserDao.class</li></ul> <h3 id="_3-4-作用域-scope-和生命周期"><a href="#_3-4-作用域-scope-和生命周期" class="header-anchor">#</a> 3.4 作用域（Scope）和生命周期</h3> <ul><li><p><strong>SqlSessionFactoryBuilder：</strong></p> <p>可以理解为数据库连接池对象，一旦创建了 SqlSessionFactory，就不再需要它了，因此最佳作用域是方法作用域（也就是局部方法变量）；</p></li> <li><p><strong>SqlSessionFactory：</strong></p> <p>可以理解为数据库连接对象，一旦被创建就应该在应用的运行期间一直存在，因此 SqlSessionFactory 的最佳作用域是应用作用域。使用<strong>单例模式或者静态单例模式</strong>。</p></li> <li><p><strong>SqlSession：</strong></p> <p>连接到连接池的一个请求，每个线程都有它自己的 SqlSession 实例。SqlSession 的实例不是线程安全的，因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域。</p> <p>为了确保每次都能执行关闭操作，把关闭操作放到 finally 块中。</p></li></ul> <h2 id="_4-全局配置文件"><a href="#_4-全局配置文件" class="header-anchor">#</a> 4. 全局配置文件</h2> <p>约束文件：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。 配置文档的顶层结构如下，必须按顺序配置</p> <ul><li><strong>configuration（配置）</strong> <ul><li><strong>properties（属性）</strong></li> <li><strong>settings（设置）</strong></li> <li><strong>typeAliases（类型别名）</strong></li> <li>typeHandlers（类型处理器）</li> <li>objectFactory（对象工厂）</li> <li>plugins（插件）</li> <li><strong>environments（环境配置）</strong> <ul><li>environment（环境变量）
<ul><li>transactionManager（事务管理器）</li> <li>dataSource（数据源）</li></ul></li></ul></li> <li>databaseIdProvider（数据库厂商标识）</li> <li><strong>mappers（映射器）</strong></li></ul></li></ul> <h3 id="_4-1-属性-properties"><a href="#_4-1-属性-properties" class="header-anchor">#</a> 4.1 属性（properties）</h3> <p>通过properties属性可以实现引用配置文件，这些属性都是可以外部配置且可动态替换的</p> <ul><li>可以在核心配置文件中配置数据库连接池的4个参数，设置好的参数可以在整个配置文件中替换需要动态配置的属性值：</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatis<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
....
<span class="token comment">&lt;!--使用${name}引用相应的值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
....
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><p>也可以引入外部的配置文件，例如编写一个外部的配置文件db.properties，然后在核心配置文件中引入：</p> <ul><li>resource：引用类路径下的资源</li> <li>url：引用网络路径或者磁盘路径下的资源</li></ul></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#外部配置文件</span>
<span class="token key attr-name">driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>核心配置文件：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!--在核心配置文件中引入外部配置文件，然后就可以使用${name}引用--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>【注意事项】：如果一个属性在不只一个地方进行了配置，那么，MyBatis 将按照下面的顺序来加载：</p> <ul><li>首先读取在 properties 元素体内指定的属性。</li> <li>然后根据 properties 元素中的 resource 属性读取类路径下属性文件，或根据 url 属性指定的路径读取属性文件，并覆盖之前读取过的同名属性。</li> <li>最后读取作为方法参数传递的属性，并覆盖之前读取过的同名属性。</li></ul> <p>因此，<strong>通过方法参数传递的属性具有最高优先级，resource/url 属性中指定的配置文件次之，最低优先级的则是 properties 元素中指定的属性。</strong></p> <h3 id="_4-2-设置-settings"><a href="#_4-2-设置-settings" class="header-anchor">#</a> 4.2 设置（settings）</h3> <p>是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。</p> <p>常用设置：</p> <ul><li>mapUnderscoreToCamelCase：是否开启驼峰命名自动映射，即从经典数据库列名 A_COLUMN 映射到经典 Java 属性名 aColumn，默认为flase</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapUnderscoreToCamelCase<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>jdbcTypeForNull：当没有为参数指定特定的 JDBC 类型时，空值的默认 JDBC 类型。默认是 OTHER，但是如果用Oracle数据库，需要改为NULL</li> <li>autoMappingBehavior：指定 MyBatis 应如何自动映射列到字段或属性。 NONE 表示关闭自动映射；PARTIAL 只会自动映射没有定义嵌套结果映射的字段。 FULL 会自动映射任何复杂的结果集（无论是否嵌套），默认为PARTIAL</li> <li>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 特定关联关系中可通过设置 <code>fetchType</code> 属性来覆盖该项的开关状态。默认是false</li> <li>aggressiveLazyLoading：开启时，任一方法的调用都会加载该对象的所有延迟加载属性。 否则，每个延迟加载属性会按需加载。</li> <li>cacheEnabled：全局性地开启或关闭所有映射器配置文件中已配置的任何缓存。默认为true，配置二级缓存的开关。一级缓存一直是打开的</li> <li>localCacheScope：MyBatis 的本地缓存机制，默认值为 SESSION，会缓存一个会话中执行的所有查询。 若设置值为 STATEMENT，本地缓存将仅用于执行语句，对相同 SqlSession 的不同查询将不会进行缓存。</li></ul> <h3 id="_4-3-类型别名-typealiases"><a href="#_4-3-类型别名-typealiases" class="header-anchor">#</a> 4.3 类型别名（typeAliases）</h3> <p>类型别名可为 Java 类型设置一个缩写名字。 仅用于 XML 配置，意在降低冗余的全限定类名书写。别名不区分大小写</p> <ul><li><p>单个类起别名，<code>&lt;typeAlias&gt;</code>标签：</p> <ul><li>type：指定要起别名的类型全类名，默认是类名小写employee(其实不区分大小写)</li> <li>alias：指定新的别名</li></ul></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- type:指定要起别名的类型全类名，默认是类名小写employee--&gt;</span>
<span class="token comment">&lt;!-- alias:指定新的别名--&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xiao.mybatis.entity.Employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>批量起别名，用<code>&lt;package&gt;</code>标签，</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xiao.mybatis.entity<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>批量情况下，如果指定包下的子包中有同名的类，会产生冲突，可以使用注解解决：在实体类上注解<code>@Alias</code>，则别名为其注解值：</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Alias</span><span class="token punctuation">(</span><span class="token string">&quot;Emp&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>常见的 Java 类型内建的类型别名。它们都是不区分大小写的，自定义的别名不要与其重复。</p> <p>基本类型前面加下划线，引用类型首字母小写：</p> <table><thead><tr><th style="text-align:left;">别名</th> <th style="text-align:left;">映射的类型</th></tr></thead> <tbody><tr><td style="text-align:left;">_byte</td> <td style="text-align:left;">byte</td></tr> <tr><td style="text-align:left;">_long</td> <td style="text-align:left;">long</td></tr> <tr><td style="text-align:left;">_short</td> <td style="text-align:left;">short</td></tr> <tr><td style="text-align:left;">_int</td> <td style="text-align:left;">int</td></tr> <tr><td style="text-align:left;">_integer</td> <td style="text-align:left;">int</td></tr> <tr><td style="text-align:left;">_double</td> <td style="text-align:left;">double</td></tr> <tr><td style="text-align:left;">_float</td> <td style="text-align:left;">float</td></tr> <tr><td style="text-align:left;">_boolean</td> <td style="text-align:left;">boolean</td></tr> <tr><td style="text-align:left;">string</td> <td style="text-align:left;">String</td></tr> <tr><td style="text-align:left;">byte</td> <td style="text-align:left;">Byte</td></tr> <tr><td style="text-align:left;">long</td> <td style="text-align:left;">Long</td></tr> <tr><td style="text-align:left;">short</td> <td style="text-align:left;">Short</td></tr> <tr><td style="text-align:left;">int</td> <td style="text-align:left;">Integer</td></tr> <tr><td style="text-align:left;">integer</td> <td style="text-align:left;">Integer</td></tr> <tr><td style="text-align:left;">double</td> <td style="text-align:left;">Double</td></tr> <tr><td style="text-align:left;">float</td> <td style="text-align:left;">Float</td></tr> <tr><td style="text-align:left;">boolean</td> <td style="text-align:left;">Boolean</td></tr> <tr><td style="text-align:left;">date</td> <td style="text-align:left;">Date</td></tr> <tr><td style="text-align:left;">decimal</td> <td style="text-align:left;">BigDecimal</td></tr> <tr><td style="text-align:left;">bigdecimal</td> <td style="text-align:left;">BigDecimal</td></tr> <tr><td style="text-align:left;">object</td> <td style="text-align:left;">Object</td></tr> <tr><td style="text-align:left;">map</td> <td style="text-align:left;">Map</td></tr> <tr><td style="text-align:left;">hashmap</td> <td style="text-align:left;">HashMap</td></tr> <tr><td style="text-align:left;">list</td> <td style="text-align:left;">List</td></tr> <tr><td style="text-align:left;">arraylist</td> <td style="text-align:left;">ArrayList</td></tr> <tr><td style="text-align:left;">collection</td> <td style="text-align:left;">Collection</td></tr> <tr><td style="text-align:left;">iterator</td> <td style="text-align:left;">Iterator</td></tr></tbody></table> <h3 id="_4-4-类型处理器-typehandlers"><a href="#_4-4-类型处理器-typehandlers" class="header-anchor">#</a> 4.4 类型处理器（typeHandlers）</h3> <p>数据库里的字段类型与Java的数据类型进行映射。</p> <p>在设置预处理语句（PreparedStatement）中的参数或从结果集中取出一个值时， 都会用类型处理器将获取到的值以合适的方式转换成 Java 类型。</p> <h3 id="_4-5-插件-plugins"><a href="#_4-5-插件-plugins" class="header-anchor">#</a> 4.5 插件（plugins）</h3> <p>MyBatis 允许在映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：</p> <ul><li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</li> <li>参数处理器：ParameterHandler (getParameterObject, setParameters)</li> <li>ResultSetHandler (handleResultSets, handleOutputParameters)</li> <li>sql语句处理器：StatementHandler (prepare, parameterize, batch, update, query)</li></ul> <h3 id="_4-6-环境配置-environments"><a href="#_4-6-环境配置-environments" class="header-anchor">#</a> 4.6 环境配置（environments）</h3> <p>MyBatis 可以配置成适应多种环境，<strong>可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。</strong> default参数指定使用某种环境。</p> <ul><li><strong>transactionManager：事务管理器</strong>，有两种类型，type=&quot;[JDBC|MANAGED]&quot;，默认的事务管理器就是JDBC。也可以自定义事务管理器：实现TransactionFactory接口，type指定为全类名</li></ul> <ul><li><strong>dataSource：数据源</strong>，有三种内建的数据源类型， type=&quot;[UNPOOLED|POOLED|JNDI]&quot;），也可以自己实现DataSourceFactory接口自定义数据源</li></ul> <div class="language-xaml line-numbers-mode"><pre class="language-text"><code>&lt;environments default=&quot;development&quot;&gt;
  &lt;environment id=&quot;development&quot;&gt;
    &lt;transactionManager type=&quot;JDBC&quot;&gt;
      &lt;property name=&quot;...&quot; value=&quot;...&quot;/&gt;
    &lt;/transactionManager&gt;
    &lt;dataSource type=&quot;POOLED&quot;&gt;
      &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
      &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
      &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
      &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
    &lt;/dataSource&gt;
  &lt;/environment&gt;
&lt;/environments&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>【注意事项】：</p> <ul><li>默认使用的环境 id（比如：default=&quot;development&quot;）。</li> <li>每个 environment 元素定义的环境 id（比如：id=&quot;development&quot;）。</li> <li>事务管理器的配置（比如：type=&quot;JDBC&quot;）。</li> <li>数据源的配置（比如：type=&quot;POOLED&quot;）。</li></ul> <h3 id="_4-7-数据库厂商标识-databaseidprovider"><a href="#_4-7-数据库厂商标识-databaseidprovider" class="header-anchor">#</a> 4.7 数据库厂商标识（databaseIdProvider）</h3> <p>MyBatis 可以根据不同的数据库厂商执行不同的语句，考虑了移植性。</p> <p>得到数据库厂商的标识(驱动getDatabaseProductName())，MyBatis就能根据数据库厂商标识来执行不同的sql。</p> <ol><li>为不同的数据库的厂商标识取别名：</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>databaseIdProvider</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DB_VENDOR<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SQL Server<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlserver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DB2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Oracle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oracle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>databaseIdProvider</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>查询语句标签中指定databaseId元素值，会优先执行带该标识的，不带标签的语句会舍弃</li></ol> <h3 id="_4-8-映射器-mappers"><a href="#_4-8-映射器-mappers" class="header-anchor">#</a> 4.8 映射器（mappers）</h3> <p>需要告诉 MyBatis 到哪里去找到 sql语句。可以使用相对于类路径的资源引用，或完全限定资源定位符（包括 <code>file:///</code> 形式的 URL），或类名和包名等</p> <ul><li>resource：指定sql映射文件的路径</li> <li>url：使用网上的资源或者使用本地磁盘路径上的文件</li> <li>class：注册接口，<strong>如果有sql映射文件，映射文件必须和接口同目录同名</strong>；也可以在接口方法上写注解，这样就不需要sql映射文件，</li> <li>package：批量注册，将包内的映射器接口实现全部注册为映射器，作用同class</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 使用相对于类路径的资源引用 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org/mybatis/builder/AuthorMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 使用完全限定资源定位符（URL） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file:///var/mappers/AuthorMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.builder.AuthorMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 将包内的映射器接口实现全部注册为映射器 --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.builder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在dao接口文件中，用注解实现查询：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//定义一个查询方法</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from tbl_employee where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Employee</span> <span class="token function">selectEmployeeById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>【一个小坑】：</p> <ol><li><p><strong>class：注册接口，如果有sql映射文件，映射文件必须和接口同目录同名</strong></p></li> <li><p>在resources中建立多级目录时，用 / 隔开，但是创建完后显示的是 . 。如果新建目录时用  .会出错。</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>    &lt;!--配置映射,注册Mapper文件--&gt;
    &lt;mappers&gt;
        &lt;mapper class=&quot;com.xiao.mybatis.mapper.EmployeeMapper&quot;/&gt;
    &lt;/mappers&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <p><img src="http://image.kongxiao.top/image-20210616205108153.png" alt="image-20210616205108153"></p> <h2 id="_5-映射文件"><a href="#_5-映射文件" class="header-anchor">#</a> 5. 映射文件</h2> <p>映射文件指导MyBatis如何进行数据库增删改。</p> <h3 id="_5-1-基本的增删改查"><a href="#_5-1-基本的增删改查" class="header-anchor">#</a> 5.1 基本的增删改查</h3> <ul><li>insert –- 映射插入语句</li> <li>update –- 映射更新语句</li> <li>delete –- 映射删除语句</li> <li>select –- 映射查询语句</li></ul> <ol><li>首先在接口文件com.xiao.mybatis.mapper.EmployeeMapper中声明对应的增删改查方法，
同时可以设置返回值类型Integer、Long、Boolean，表示被影响的行数</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeMapper</span> <span class="token punctuation">{</span>

    <span class="token comment">//定义一个查询方法</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from tbl_employee where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Employee</span> <span class="token function">selectEmployeeById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//增加</span>
    <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//根据id删除</span>
    <span class="token keyword">void</span> <span class="token function">deleteEmpById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//修改</span>
    <span class="token keyword">void</span> <span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="2"><li>然后在sql映射文件EmployeeMapper.xml中编写相应的sql语句</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!--parameterType:参数类型，可以省略--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addEmp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        insert into tbl_employee (last_name, gender, email) value (#{lastName},#{gender},#{email})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteEmpById<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        delete from tbl_employee where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateEmp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        update tbl_employee set last_name=#{lastName},email=#{email},gender=#{gender}
        where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="3"><li>测试：</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 默认不自动提交事务，需要手动提交，或者构造方法传入true</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">EmployeeMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmployeeMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//增</span>
        mapper<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;林青霞&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;lingqingxia@163.com&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//删</span>
        mapper<span class="token punctuation">.</span><span class="token function">deleteEmpById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//改</span>
        mapper<span class="token punctuation">.</span><span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;张柏芝&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zhangbozhi@qq.com&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 手动提交事务</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>注意事项：增删改需要提交事务</strong></p> <p>sqlSessionFactory.openSession()：需要手动提交， sqlSession.commit();</p> <p>sqlSessionFactory.openSession(true) 是自动提交事务的</p> <h3 id="_5-2-获取自增主键的值"><a href="#_5-2-获取自增主键的值" class="header-anchor">#</a> 5.2 获取自增主键的值</h3> <p>MySQL支持自增主键，在MyBatis中也是使用 statement.getGeneratedKeys() 获取自增主键的值。</p> <p>用法，insert标签中增加属性</p> <ul><li><p>useGeneratedKeys=&quot;true&quot;:使用自增主键获取主键值策略</p></li> <li><p>keyProperty=&quot;id&quot;:获取到的主键封装给JavaBean的id属性</p></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--useGeneratedKeys=&quot;true&quot;:使用自增主键获取主键值策略--&gt;</span>
<span class="token comment">&lt;!--keyProperty=&quot;id&quot;:获取到的主键封装给JavaBean的id属性--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addEmp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tbl_employee (last_name, gender, email) value (#{lastName},#{gender},#{email})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>测试：employee.getId()方法可以获取到自增的主键值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tom@126.com&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mapper<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-3-参数处理"><a href="#_5-3-参数处理" class="header-anchor">#</a> 5.3 参数处理</h3> <p>取参数的方式：#{参数名}</p> <h4 id="_01-单个参数"><a href="#_01-单个参数" class="header-anchor">#</a> 01 单个参数</h4> <p>MyBatis不会做处理，传入id，sql语句中写 #{idabc} 也能取到参数</p> <h4 id="_02-多个参数"><a href="#_02-多个参数" class="header-anchor">#</a> 02 多个参数</h4> <p>会被封装成一个map，#{}就是从map中获取指定key值的value。</p> <p>key：param1,...paramN，或者参数的索引也可以</p> <p>value：传入的参数值</p> <p>如果按照之前的写法会报异常：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>Employee employee = mapper.selectEmpByIdAndName(6, &quot;Tom&quot;);

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectEmpByIdAndName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      select  * from tbl_employee where id = #{id} and last_name=#{lastName}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>BindingException: Parameter 'id' not found. Available parameters are [arg1, arg0, param1, param2]</p></blockquote> <p>正确写法，但是一般不这么用：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> select  * from tbl_employee where id = #{param1} and last_name=#{param2}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>常规用法：在接口方法中加注解<code>@Param</code>：</strong> 相当于key中保存的是@Param注解指定的值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Employee</span> <span class="token function">selectEmpByIdAndName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;lastName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> lastName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_03-传入对象"><a href="#_03-传入对象" class="header-anchor">#</a> 03 传入对象</h4> <ul><li><p>如果多个参数正好是业务逻辑的数据模型，就可以直接传入POJO，#{属性名}取出传入的POJO的属性值</p></li> <li><p>如果不是业务模型中的数据，没有对应的POJO，也可以传入map，#{key}取出map中对应的值，或者编写一个TO(Transfer Object )数据传输对象。</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//封装传入参数为Map,查询</span>
<span class="token class-name">Employee</span> <span class="token function">selectEmpByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//注意sql语句中#{id},#{lastName}与map中的键字段名称一一对应</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;lastName&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Employee</span> employee <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectEmpByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code>select  * from tbl_employee where id = #{id} and last_name=#{lastName}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_04-几种情况小结"><a href="#_04-几种情况小结" class="header-anchor">#</a> 04 几种情况小结</h4> <ol><li><p><code>Employee getEmp(@Param(&quot;id&quot;) Integer id, String lastName)</code></p> <p>取值：id ==&gt; #{id}或者#{param1}，lastName  ==&gt; #{param2}</p></li> <li><p><code>Employee getEmp(Integer id, @Param(&quot;e&quot;) Employee emp)</code></p> <p>取值：id ==&gt; #{param1}，lastName  ==&gt; #{e.lastName}或者 #{param2.lastName}</p></li> <li><p>如果传入的是Collection类型或者是数组，则会把传入的集合或者数组封装在map中</p> <p>key：collection，list，array</p> <p><code>Employee getEmp(List&lt;Integer&gt; ids)</code></p> <p>取值：取出第一个id的值 #{list[0]}</p></li></ol> <p>总结：参数多时封装成map，结合@Param指定封装时使用的key，#{key}取出map中的值</p> <h4 id="_05-和-的区别"><a href="#_05-和-的区别" class="header-anchor">#</a> 05 #{}和${}的区别</h4> <ul><li><p><code>#{}</code>：是以预编译的形式，即占位符，将参数设置到sql语句中，类似于JDBC中的PreparedStament，防止sql注入</p></li> <li><p><code>${}</code>：取出的值直接拼装在sql语句中，会有安全问题。</p> <p>原生JDBC中不支持占位符的地方就可以用${取值}，比如表名、排序字段等</p> <p>select * from ${year}_salary where ...</p> <p>select * from tbl_employee order by ${name}</p> <blockquote><p>注意：MyBatis 的 xml文件，排序时使用order by 动态参数时需要注意，用$而不是#</p></blockquote></li></ul> <h3 id="_5-4-select的结果映射"><a href="#_5-4-select的结果映射" class="header-anchor">#</a> 5.4 select的结果映射</h3> <h4 id="_01-返回的是集合"><a href="#_01-返回的是集合" class="header-anchor">#</a> 01 返回的是集合</h4> <p>select语句中resultType写的是集合中元素的类型</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//查询所有，返回一个集合</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select  * from tbl_employee
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>测试：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> employees <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Employee</span> employee <span class="token operator">:</span> employees<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Employee{id=1, lastName='张曼玉', email='zhangmanyu@163.com', gender='1'}
Employee{id=3, lastName='wangwu', email='wangwu@126.com', gender='0'}
Employee{id=5, lastName='林青霞', email='lingqingxia@163.com', gender='1'}
Employee{id=6, lastName='Tom', email='tom@126.com', gender='0'}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_02-返回一条记录的map"><a href="#_02-返回一条记录的map" class="header-anchor">#</a> 02 返回一条记录的map</h4> <p>如果想把一条记录的返回值类型封装为map，key值为字段名，value值。则指定resultType为map，查询到的结果会将指定的列映射到Map 的键上，结果映射到值上。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//返回一条记录的map，key是列名，值就是对应的值</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectEmpByIdToMap</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--查询并返回一条记录的map--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectEmpByIdToMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from tbl_employee where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>测试：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectEmpByIdToMap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{gender=1, last_name=张曼玉, id=1, email=zhangmanyu@163.com}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_03-多条记录封装为map"><a href="#_03-多条记录封装为map" class="header-anchor">#</a> 03 多条记录封装为map</h4> <p>如果想封装多条记录到map中，key是主键值，value是JavaBean对象，则在接口方法上使用@MapKey注解指定key的属性； resultType依然为map中的value类型</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//返回多条记录封装到map中，key是主键值，value是JavaBean对象</span>
<span class="token comment">//@MapKey；指定返回的map的key</span>
<span class="token annotation punctuation">@MapKey</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 返回多条记录封装到map中，key是主键值，value是JavaBean对象--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAllToMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select *
        from tbl_employee
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>测试：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAllToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{1=Employee{id=1, lastName='张曼玉', email='zhangmanyu@163.com', gender='1'}, 3=Employee{id=3, lastName='wangwu', email='wangwu@126.com', gender='0'}, 5=Employee{id=5, lastName='林青霞', email='lingqingxia@163.com', gender='1'}, 6=Employee{id=6, lastName='Tom', email='tom@126.com', gender='0'}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而指定 <code>resultType</code> 属性为实体类时，查询到的结果会将指定的列映射到类的成员变量名上，结果映射到成员变量值上。</p> <p><strong>【注意】：实体类中的属性名和数据库中的字段名保持一致。否则结果值会为null。</strong></p> <p>如果列名和属性名不能匹配上，且不满足驼峰命名自动映射，可以在 SELECT 语句中设置列别名，<strong>也可以显式配置 <code>ResultMap</code></strong></p> <h4 id="_04-自定义resultmap"><a href="#_04-自定义resultmap" class="header-anchor">#</a> 04 自定义ResultMap</h4> <p>如果列名和属性名不能匹配上，在xml映射文件中显式配置 <code>ResultMap</code>标签</p> <ul><li>type：自定义规则的Java类型</li> <li>id：唯一id，用于引用</li> <li><strong>column：指定数据库中的字段</strong></li> <li><strong>property：指定对应的JavaBean中的属性</strong></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--自定义结果集规则--&gt;</span>
<span class="token comment">&lt;!--type:自定义规则的Java类型--&gt;</span>
<span class="token comment">&lt;!--id:唯一id，用于引用--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyEmp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--用id标签定义主键底层会有优化，普通列用result标签--&gt;</span>
    <span class="token comment">&lt;!--column：指定哪一列--&gt;</span>
    <span class="token comment">&lt;!--property:指定对应的JavaBean属性--&gt;</span>
    <span class="token comment">&lt;!--不指定的列会自动封装--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>last_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--用resultMap取代resultType，值为自命名的id--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectEmp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyEmp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tbl_employee
    where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/14/2022, 1:08:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study-note/pages/Framework/SSM/MyBatis01-JDBC.html" class="prev">
        原生JDBC
      </a></span> <span class="next"><a href="/study-note/pages/Framework/SSM/MyBatis03-Association&amp;Collection.html">
        一对多、多对一
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study-note/assets/js/app.cf42b68c.js" defer></script><script src="/study-note/assets/js/2.a46c0893.js" defer></script><script src="/study-note/assets/js/18.5d91c0df.js" defer></script>
  </body>
</html>
